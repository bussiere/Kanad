from django.db import models
from django.contrib.auth.models import User
from jackpoint.presentation.models import Langue
from jackpoint.tags.models import Tag
from jackpoint.moteur.models import Video,Film,Pack,ImageVente
from jackpoint.notes.models  import Note_divers

class IP(models.Model):
	IP = models.CharField(max_length=50)
        def ___str__(self):
             return self.IP
        def __unicode__(self):
             return self.Date
    

class Date_Visite(models.Model):
    	Date = models.DateTimeField('Date visite')
        def __str__(self):
            return self.Date
        def __unicode__(self):
            return self.Date
    

class Site_hack_css(models.Model):
    Site = models.URLField()

    def __str__(self):
        return self.site
    def __unicode__(self):
        return self.Site


class Anonymous(models.Model):
    Referer = models.CharField(max_length=1500)
    Langue = models.ForeignKey(Langue)
    IP = models.ForeignKey(IP)
    Date_Visite = models.ManyToManyField(Date_Visite,null=True,blank=True)
    Note_divers = models.ManyToManyField('notes.Note_divers',blank=True)

    def __str__(self):
        return self.IP
    def __unicode__(self):
        return self.IP
    

class Categorie_Client (models.Model):
	Nom  = models.CharField(max_length=200,blank=True)
	Note_divers = models.ManyToManyField('notes.Note_divers',blank=True)
    def __str__(self):
        return self.Nom
    def __unicode__(self):
        return self.Nom


class Client(models.Model):
    User = models.ForeignKey(User, unique=True) 
    Nom = models.CharField(max_length=200)
    Prenom = models.CharField(max_length=200)
    Email =  models.EmailField()
    Telephone = models.CharField(max_length=200,null=True,blank=True)
    Date_inscription = models.DateTimeField('date inscription',null=True,blank=True)
    Naissance = models.DateTimeField('Date de naissance',null=True,blank=True)
    Tag = models.ManyToManyField(Tag,null=True,blank=True)
    Video_Vendu =  models.ManyToManyField(Video,null=True,blank=True)
    Film_Vendu = models.ManyToManyField(Film,null=True,blank=True)
    Pack_Vendu = models.ManyToManyField(Pack,null=True,blank=True)
    Imageventes_Vendu = models.ManyToManyField(ImageVente,null=True,blank=True)
    IP = models.ManyToManyField(IP,null=True,blank=True)
    Note_divers = models.ManyToManyField(Note_divers,null=True,blank=True)
    Referer = models.CharField(max_length=1500,null=True,blank=True)
    Langue = models.ManyToManyField(Langue,null=True,blank=True)
    Date_Visite = models.ManyToManyField(Date_Visite,null=True,blank=True)
    Abo_Newsletter = models.BooleanField()
    Was_Anonymous = models.ForeignKey(Anonymous)
    Categorie = models.ManyToManyField(Categorie_Client,null=True,blank=True)
    Historique_hack_css = models.ManyToManyField(Site_hack_css,null=True,blank=True)

    def __str__(self):
        return self.Email
    def __unicode__(self):
        return self.Email
  
	
